
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>

    <link href="~/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
   <link rel="stylesheet" href="~/font-awesome/css/all.min.css" />

  <script src="~/lib/jquery/dist/jquery.min.js"></script>

   <script type="text/javascript">
       $(document).ready(function(){
         LodeDist();
          LodeData();

         $('#ddldist').on('change',function(){
             var dist=$('#ddldist option:selected').val()
             LodeTluka(dist)
         })
         $('#ddltaluka').on ('change',function(){
             var taluka=$('#ddltaluka option:selected').val()
              LodeVillage(taluka)
         })

         $('#btnsave').click(function(){
             SaveData();
         })
       })

       function LodeDist(){
           $.ajax({

               url:'https://localhost:7010/Account/LodeDistrict',
               type:'GET',
               dataType:'json',     
               success:function(responce)
               {
                   $('#ddldist').empty();
                   $('#ddldist').html('<option value="0">--select--</option>')
                   $.each(responce,function(index,value){
                   
                       $('#ddldist').append('<option value='+value.districtId+'>'+value.districtName+'</option>')
                  })

               }
           })
       }

       function LodeTluka(id)
       {
           $.ajax({
               url:'https://localhost:7010/Account/LodeTaluka/'+id,
               type:'GET',
               dataType:'json',
               success:function(responce)
               {
                   $('#ddltaluka').empty();
                   $('#ddltaluka').html('<option value="0">--select--</option>')
                   $.each(responce,function(index,value){
                       $('#ddltaluka').append('<option value='+value.talukaId+'>'+value.talukaName+'</option>')
                   })
               }
           })
       }

       function LodeVillage(id){
          $.ajax({
              url:'https://localhost:7010/Account/LodeVillage/'+id,
              type:'GET',
              dataType:'json',
              success:function(responce)
              {
                  $('#ddlvillage').empty();
                  $('#ddlvillage').html('<option value="0">--select--</option>')

                  $.each(responce,function(index,value){
                      $('#ddlvillage').append('<option value='+value.villageId+'>'+value.villageName+'</option>')
                  })
              }
          })
       }

       function SaveData(){
           var name=$('#name').val();
           var email=$('#email').val();
           var phone=$('#phone').val();
           var vid=$('#ddlvillage')  .val();

           var jsondata={

               Name:name,
               Email:email,
               Phone:phone,
               VillageId:vid
           }

           $.ajax({
               url:'https://localhost:7010/Account/SaveData',
               type:'POST',
               dataType:'json',
               data:jsondata,
               success:function(responce)
               {
                   alert('Record Save SuccessFully');
               }
           })
       }

       function LodeData()
       {
           $.ajax({
               url:'https://localhost:7010/Account/LodeData',
               type:'GET',
               dataType:'json',
               success:function(responce){

                   $('#tbldata tbody').empty();
                   var data="";
                   $.each(responce,function(index,value){
                       
                       data+='<tr>'
                       data+='<td>'+value.name+'</td>'
                           data+='<td>'+value.email+'</td>'
                               data+='<td>'+value.phone+'</td>'
                               data+='<td>'+value.districtName+'</td>'
                               data+='<td>'+value.talukaName+'</td>'
                                data+='<td>'+value.villageName+'</td>'
                                 data+='<td data-Id['+value.id+']><span><i class="fas fa-edit" style="color:blue" onclick=getidedit('+value.id+')></span></td>'
                         data+='</tr>'
                   })
                   $('#tbldata tbody').append(data);
               }

           })

       }

       function getidedit(){
           alert('come');
       }
   </script>
</head>
<body>
    <div class="container mt-3">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" name="Name" id="name" />
                        </div>
                    </div>
                      <div class="col-sm-3">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" name="Email" id="email" />
                        </div>
                    </div>
                      <div class="col-sm-3">
                        <div class="form-group">
                            <label>Phone</label>
                            <input type="number" name="Phone" id="phone" />
                        </div>
                    </div>
                      <div class="col-sm-3">
                        <div class="form-group">
                            <label>District</label>
                            <select id="ddldist">
                                <option value="0">--select--</option>
                            </select>
                        </div>
                    </div>
                      <div class="col-sm-3 mt-2">
                        <div class="form-group">
                             <label>Taluka</label>
                            <select id="ddltaluka">
                                <option value="0">--select--</option>
                            </select>
                        </div>
                    </div>
                     <div class="col-sm-3 mt-2">
                        <div class="form-group">
                             <label>Village</label>
                            <select id="ddlvillage">
                                <option value="0">--select--</option>
                            </select>
                        </div>
                    </div>
                </div>
                 <div class="col-sm-3 mt-2">
                        <div class="form-group">
                           <input type="submit" value="Save" id="btnsave" class="btn btn-success" />
                        </div>
                    </div>
            </div>
        </div>
    </div>

    <div class="container mt-5">
        <div class ="card">
            <table id="tbldata">
                <thead>
                    <tr>
                        <td>Name</td>
                        <td>Email</td>
                        <td>Phone</td>
                        <td>District</td>
                        <td>Taluka</td>
                        <td>Village</td>
                        <td>Action</td>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
